"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[564],{60564:function(t,e,r){r.r(e),r.d(e,{ComponentContext:function(){return E},ComponentProvider:function(){return S},createComponentStore:function(){return A},useComponentStore:function(){return C}});r(44936),r(96391),r(87246),r(44718),r(69460),r(17385),r(92374),r(91560),r(16120),r(31002),r(60452),r(23395),r(80978),r(11183),r(93801),r(78529);var o=r(85523),n=r(35457),i=r(65362),s=r(90254),l=r(73366),a=r(9797),u=r(4223),c=r(12361),f=r(95239),d=r(19126),p=r(88578),m=r(30204),v=r(37847),y=r(88882),I=r(91570),h=r(55406);function _(t,e){return _=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},_(t,e)}var g=function(t){function e(){return t.apply(this,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_(t,e)}(e,t),e}(y.Y),L=r(13693);function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function w(t,e,r,o,n,i,s){try{var l=t[i](s),a=l.value}catch(t){return void r(t)}l.done?e(a):Promise.resolve(a).then(o,n)}function x(t){return function(){var e=this,r=arguments;return new Promise((function(o,n){var i=t.apply(e,r);function s(t){w(i,o,n,s,l,"next",t)}function l(t){w(i,o,n,s,l,"throw",t)}s(void 0)}))}}function P(){return P=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},P.apply(this,arguments)}function T(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return b(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(t,e){var r,o,n,i,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,o=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(n=s.trys,(n=n.length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){s.label=i[1];break}if(6===i[0]&&s.label<n[1]){s.label=n[1],n=i;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(i);break}n[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],o=0}finally{r=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var D=(0,I.fz)((function(t){var e={nodeCommon:{},context:{},$service:{},goodsList:[],recommendGoodsList:[],offset:0,hasMore:!0,status:h.sB.EMPTY,limit:20,isShowViewMore:!1,isShowPolicy:!1,filterList:[],selectedFilter:[],isFilterDataLoaded:!1,hoverObj:{text:"",x:-100,y:0},categoryList:[],optId:"",vrParams:{cmmDsId:"",secOptId:"",title:"",recPoolId:""},listId:(0,n.x)(),isVrDs:!1,activityName:"",disableItemList:[],linkUrl:"",hasFirstReqLoaded:!1};return(0,p.M)()((0,i.n)((function(r,i){return P({},e,t,{setHoverText:function(t,e,o){r((function(r){r.hoverObj={text:t,x:e,y:o}}))},setIsVrDs:function(t){r((function(e){e.isVrDs=t}))},setGoodsList:function(t){r((function(e){e.goodsList=t}))},initService:function(){r((function(t){t.$service=new g(i().context.$axiosHttp)}))},getInitialProps:x((function(t){var e,n,s,l,a,u,c,f,d,p;return O(this,(function(m){switch(m.label){case 0:return e=t.isServer,n=i(),s=n.initService,l=n.nodeCommon.props,a=n.goodsList,u=n.queryGoodsList,c=n.setVrParams,f=n.setIsVrDs,n.__innerGlobalStore,s(),(d=l.dsId)!==y.y.VR002&&d!==y.y.VR001||(f(!0),c()),(null==a?void 0:a.length)?[3,2]:[4,u(e)];case 1:m.sent(),m.label=2;case 2:return r((function(t){t.hasFirstReqLoaded=!0})),p=i().status,e||p!==h.sB.FAILED||l.goodsEmpty!==h.mY.GO_DEFAULT||(0,o.r1)({errorType:o.RN.GOODS_EMPTY}),[2]}}))})),setVrParams:function(){var t,e,o,n=((null!=(o=null==(e=i())||null==(t=e.__innerGlobalStore)?void 0:t.getState())?o:{}).sysInfo||{}).query;r((function(t){t.vrParams={cmmDsId:null==n?void 0:n.cmm_ds_id,secOptId:null==n?void 0:n.sec_opt_id,title:null==n?void 0:n.view_all_title,recPoolId:null==n?void 0:n.pool_id}}))},queryGoodsList:x((function(t){var e,o,n,c,p,y,I,_,g,b,w,x,D,E,S,C,A,F,G,R,k,M,N,j,q,U,B,V,Y,$,H,z,K,Q,Z,J,W,X,tt,et,rt,ot,nt,it,st,lt,at,ut,ct,ft,dt,pt,mt,vt,yt,It,ht,_t,gt,Lt,bt,wt,xt,Pt,Tt;return O(this,(function(O){switch(O.label){case 0:return O.trys.push([0,2,,3]),o=i(),n=o.offset,c=o.status,p=o.nodeCommon,y=p.props,I=p.customName,_=p.pageBase,g=p.sysInfo,b=o.$service,w=o.context,x=o.vrParams,D=o.listId,E=o.isVrDs,S=y.limit,C=void 0===S?h.UZ:S,A=y.dsId,F=y.card,G=y.type,R=y.optRecType,k=y.activityName,M=y.poolId,N=y.skipPageTitle,j=y.manualTopGoods,q=(null==(e=(0,s.hb)(w))?void 0:e.leoProxyInfo)||{},U=(null==q?void 0:q.tmpl)?(0,f.ru)(P({},q),"https://www.temu.com/kuiper/"+(null==q?void 0:q.tmpl)+".html"):"",B=U?{penetrateParams:{tt_referer:U}}:{},c===h.sB.PENDING?[2]:(V=P({dsId:A,offset:n,limit:C,listId:D,goodsCardItemType:null==F?void 0:F.cardType,recPoolId:M,manualTopGoods:j,goodsPoolParam:M?{poolId:M,title:N||"",cmmDsId:A}:N?{title:N}:void 0},B),k&&(V.activityName=k),E&&(V=P({},V,{dsId:null==x?void 0:x.cmmDsId,secOptId:null==x?void 0:x.secOptId,recPoolId:null==x?void 0:x.recPoolId})),G===h.oY.TAB_NEW&&(V.optRecType=R,V.useCondition=!1,V.needCategoryRec=!0,$=l.jU?window.location.search:null==w||null==(Y=w.__req)?void 0:Y.originalUrl,H=(0,d.parse)($,{ignoreQueryPrefix:!0}),V.optId=H.optId||"",V.optType=H.optType||"",r((function(t){t.optId=H.optId||""}))),h.oY.FILTER===G&&(V.useCondition=!0,V.needCategoryRec=G===h.oY.FILTER,Z=l.jU?null==(K=window)||null==(z=K.location)?void 0:z.search:null==w||null==(Q=w.__req)?void 0:Q.originalUrl,J=(0,d.parse)(Z,{ignoreQueryPrefix:!0}),V.filterItems=J.filterItems||"",V.optId=J.optId||"",V.optType=J.optType||"",W=J.activity_name||"",r((function(t){t.optId=J.optId||"",t.activityName=W}))),r((function(t){t.status=h.sB.PENDING})),[4,b.fetchGoodsList(V)]);case 1:for(X=O.sent(),tt=X.kpDsItemList,et=X.filterRegion,rt=X.categoryRecResult,ot=X.hasMore,nt=X.message,X.subTabList,it=X.linkUrl,st=X.disableItemList,lt=0,at=tt||[];lt<at.length;lt++)if(null==(ut=at[lt])?void 0:ut.commonRecGoods){dt=null==w||null==(ft=w.__req)||null==(ct=ft.app)?void 0:ct.logger,pt=ut.commonRecGoods,mt=pt.priceInfo,yt=(vt=void 0===mt?{}:mt).marketPriceText,It=vt.reductionText,ht=!Array.isArray(yt),_t=!Array.isArray(It),gt="{}";try{gt=JSON.stringify({market_price_text:void 0===yt?"undefined":yt,reduction_text:void 0===It?"undefined":It})}catch(t){gt="{}"}t&&(ht||_t)?null==dt||dt.info("ds_market_or_reduction_price_text_is_not_array",{logValue:gt,req:null==w?void 0:w.__req}):l.jU&&(ht||_t)&&(0,L.h)("ds_market_or_reduction_price_text_is_not_array",{customTags:{data:gt},rate:1})}if(rt&&(Lt=(0,a.nI)(w).t,r((function(t){t.categoryList=[{optName:Lt("masonry.recommended"),optId:"",optType:""}].concat((null==rt?void 0:rt.optList)||[])}))),et&&r((function(t){var e,r,o;t.isFilterDataLoaded=!0;var n,i=[];null==et||null==(r=et.rankSorter)||null==(e=r.filters)||e.forEach((function(t){Object.assign(t,{isSection:!0}),(null==t?void 0:t.selected)&&i.push(t)})),t.selectedFilter=i.concat(et.selectedFilter);var s=null!=(n=null==et||null==(o=et.innerFilter)?void 0:o.filterList)?n:[];t.filterList=s.map((function(t){var e=t.filters,r=void 0===e?[]:e,o=t.viewMore,n=function(t,e){if(null==t)return{};var r,o,n={},i=Object.keys(t);for(o=0;o<i.length;o++)r=i[o],e.indexOf(r)>=0||(n[r]=t[r]);return n}(t,["filters","viewMore"]),i=r.map((function(t){return t.selected})).lastIndexOf(1)+1,s=Math.ceil(Math.max(.1,i)/o);return P({},n,{viewMore:o,filters:r.slice(0,s*o),$filters:r.slice(s*o)})}))})),!(null==tt?void 0:tt.length)&&![h.oY.FILTER].includes(G))throw new Error(nt||(0===n?"first screen goods empty":"queryGoodsList error"));return r((function(t){t.disableItemList=st||[],t.goodsList=T(0==n?[]:t.goodsList).concat(T((0,v.yq)(tt,{cardTrackingInfo:{card_type:m.mq.CARD_DEFAULT,custom_name:I},pageBase:_,sysInfo:g}))),t.offset+=C;var e=t.nodeCommon.props,r=e.limitMode,o=e.type,i=r===h.yx.LIMITED&&o===h.oY.NORMAL;t.hasMore=!i&&!!ot,it&&(t.linkUrl=it)})),r((function(t){t.status=h.sB.DONE})),[3,3];case 2:return bt=O.sent(),Tt=!!(null==(Pt=i())||null==(xt=Pt.nodeCommon)||null==(wt=xt.pageBase)?void 0:wt.isBot),l.jU?(r((function(t){t.hasMore=!1,t.status=h.sB.FAILED})),Tt||(0,u.HG)(bt)):r((function(t){t.status=h.sB.DONE})),[3,3];case 3:return[2]}}))})),onFilterItemClick:function(t,e,o){var s=t.filter,l=t.isSection;r((function(t){t.offset=0,t.listId=(0,n.x)();var r=[];t.filterList.forEach((function(t){var n=t.filters,i=t.multi;n.forEach((function(t){t.filter===s?(t.selected=e&&o?1:t.selected?0:1,t.minPrice=e,t.maxPrice=o):(0===i||t.isSection&&l)&&(t.selected=0);var n=t.filter,a=t.minPrice,u=t.maxPrice,c=t.name,f="Z104:"===t.filter&&a&&u;t.selected&&r.push({filter:f?""+n+a+","+u:n,name:c,selected:1})}))})),t.selectedFilter=r}));var a=i().selectedFilter.map((function(t){return t.filter})).join("|");(0,c.qz)({filterItems:a}),i().queryGoodsList()},reset:function(t){var e=i().selectedFilter,o=t?e.filter((function(e){var r=e.filter;return r!==t&&0!==r.indexOf(t)})):[];r((function(t){t.selectedFilter=o,t.offset=0,t.listId=(0,n.x)()}));var s=o.map((function(t){return t.filter})).join("|");(0,c.qz)({filterItems:s}),i().queryGoodsList()},appendFilterList:x((function(t){var e;return O(this,(function(o){return e=t.identifier,r((function(t){t.filterList.forEach((function(t){var r=t.identifier,o=t.filters,n=t.$filters,i=t.viewMore;e===r&&(t.filters=o.concat(null==n?void 0:n.slice(0,i)),t.$filters=null==n?void 0:n.slice(i))}))})),[2]}))}))})})))})),E=D.ComponentContext,S=D.ComponentProvider,C=D.useComponentStore,A=D.createComponentStore}}]);
//# sourceMappingURL=http://temudebug.com/sourcemaps/assets/js/564_60e2c14626234d6cf057.js.map